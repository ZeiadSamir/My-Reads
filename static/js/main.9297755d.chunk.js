(this["webpackJsonpmy-reads"]=this["webpackJsonpmy-reads"]||[]).push([[0],{16:function(e,t,n){},18:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(10),o=n.n(c),r=(n(16),n(9)),l=n.n(r),i=n(11),d=n(4),h=(n(18),n(5)),j=n(2),b=n(6),u="https://reactnd-books-api.udacity.com",f=localStorage.token;f||(f=localStorage.token=Math.random().toString(36).substr(-8));var O={Accept:"application/json",Authorization:f},p=n(0),m=function(e){var t=e.query,n=e.searchBooks,a=e.handleQuery,s=e.handleShelfUpdate;return Object(p.jsxs)("div",{className:"search-books",children:[Object(p.jsxs)("div",{className:"search-books-bar",children:[Object(p.jsx)(h.b,{to:"/",className:"close-search",children:"Close"}),Object(p.jsx)("div",{className:"search-books-input-wrapper",children:Object(p.jsx)("input",{type:"text",placeholder:"Search by title, author, or ISBN",value:t,onChange:function(e){return a(e.target.value)}})}),console.log(t)]}),Object(p.jsx)("div",{className:"search-books-results",children:Object(p.jsx)("ol",{className:"books-grid",children:n.map((function(e){return Object(p.jsx)("li",{children:Object(p.jsxs)("div",{className:"book",children:[Object(p.jsxs)("div",{className:"book-top",children:[Object(p.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks?e.imageLinks.smallThumbnail:"https://drupal.nypl.org/sites-drupal/default/files/blogs/J5LVHEL.jpg"," )"),backgroundSize:128}}),Object(p.jsx)("div",{className:"book-shelf-changer",children:Object(p.jsxs)("select",{name:e.id,defaultValue:e.shelf?e.shelf:"none",onChange:function(t){return s(e,t.target.value)},children:[Object(p.jsx)("option",{value:"Move to...",disabled:!0,children:"Move to..."}),Object(p.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(p.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(p.jsx)("option",{value:"read",children:"Read"}),Object(p.jsx)("option",{value:"none",children:"None"})]})})]}),Object(p.jsx)("div",{className:"book-title",children:e.title}),Object(p.jsx)("div",{className:"book-authors",children:e.authors}),Object(p.jsx)("div",{children:e.shelf})]})},e.id)}))})})]})},x=function(e){var t=e.handleShelfUpdate,n=e.filterName,a=e.shelfTitle;return Object(p.jsxs)("div",{className:"bookshelf",children:[Object(p.jsx)("h2",{className:"bookshelf-title",children:a}),Object(p.jsx)("div",{className:"bookshelf-books",children:Object(p.jsxs)("ol",{className:"books-grid",children:[n.map((function(e){return Object(p.jsx)("li",{children:Object(p.jsxs)("div",{className:"book",children:[Object(p.jsxs)("div",{className:"book-top",children:[Object(p.jsx)("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(e.imageLinks?e.imageLinks.smallThumbnail:"https://drupal.nypl.org/sites-drupal/default/files/blogs/J5LVHEL.jpg"," )"),backgroundSize:128}}),Object(p.jsx)("div",{className:"book-shelf-changer",children:Object(p.jsxs)("select",{name:e.id,onChange:function(n){return t(e,n.target.value)},defaultValue:e.shelf,children:[Object(p.jsx)("option",{value:"Move to...",disabled:!0,children:"Move to..."}),Object(p.jsx)("option",{value:"currentlyReading",children:"Currently Reading"}),Object(p.jsx)("option",{value:"wantToRead",children:"Want to Read"}),Object(p.jsx)("option",{value:"read",children:"Read"}),Object(p.jsx)("option",{value:"none",children:"None"})]})})]}),Object(p.jsx)("div",{className:"book-title",children:e.title}),Object(p.jsx)("div",{className:"book-authors",children:e.authors}),Object(p.jsx)("div",{className:"book-page",children:Object(p.jsx)("a",{href:e.infoLink,target:"_blank",rel:"noopener noreferrer",children:"Visit Book"})})]})},e.id)})),console.log(n)]})})]})},v=function(e){var t=e.books,n=e.handleShelfUpdate,a=t.filter((function(e){return"currentlyReading"===e.shelf})),s=t.filter((function(e){return"wantToRead"===e.shelf})),c=t.filter((function(e){return"read"===e.shelf}));return Object(p.jsxs)("div",{className:"app",children:[Object(p.jsxs)("div",{className:"list-books",children:[Object(p.jsx)("div",{className:"list-books-title",children:Object(p.jsx)("h1",{children:"My Reads"})}),Object(p.jsx)("div",{className:"list-books-content",children:Object(p.jsxs)("div",{children:[Object(p.jsx)(x,{filterName:a,shelfTitle:"Currently Reading",books:t,handleShelfUpdate:n}),Object(p.jsx)(x,{filterName:s,shelfTitle:"Want To Read",books:t,handleShelfUpdate:n}),Object(p.jsx)(x,{filterName:c,shelfTitle:"Read",books:t,handleShelfUpdate:n})]})})]}),Object(p.jsx)(h.b,{to:"/search",className:"open-search",children:"open-search"}),Object(p.jsxs)("div",{className:"dev-name",children:["Development: ",Object(p.jsx)("a",{href:"https://www.linkedin.com/in/zeiad-samir-304778215/",target:"_blank",rel:"noopener noreferrer",children:"Zeiad Samir"})]})]})};var k=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(new Map),o=Object(d.a)(c,2),r=o[0],f=o[1],x=Object(a.useState)([]),k=Object(d.a)(x,2),g=k[0],N=k[1],y=Object(a.useState)(""),S=Object(d.a)(y,2),w=S[0],R=S[1],T=Object(a.useState)([]),C=Object(d.a)(T,2),L=C[0],M=C[1];Object(a.useEffect)((function(){(function(){var e=Object(i.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(u,"/books"),{headers:O}).then((function(e){return e.json()})).then((function(e){return e.books}));case 2:t=e.sent,s(t),f(U(t));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(a.useEffect)((function(){var e=g.map((function(e){return r.has(e.id)?r.get(e.id):e}));M(e)}),[r,g]);var U=function(e){var t=new Map;return e.forEach((function(e){return t.set(e.id,e)})),t},B=function(e,t){var a=n.map((function(n){return n.id===e.id?(e.shelf=t,console.log("Book Id Is ".concat(e.id,", New Shelf for this book is ").concat(t)),e):n}));!function(e,t){fetch("".concat(u,"/books/").concat(e.id),{method:"PUT",headers:Object(b.a)(Object(b.a)({},O),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))}(e,t),s(a)};return Object(a.useEffect)((function(){w?(R(w),function(e,t){return fetch("".concat(u,"/search"),{method:"POST",headers:Object(b.a)(Object(b.a)({},O),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e,maxResults:t})}).then((function(e){return e.json()})).then((function(e){return e.books}))}(w,10).then((function(e){e.error?(N([]),console.log("we found error while getting books"),alert("Book Not Found!")):N(e)}))):(N([]),R(""))}),[w]),Object(p.jsx)(h.a,{basename:"/",children:Object(p.jsxs)(j.c,{children:[Object(p.jsx)(j.a,{path:"/",element:Object(p.jsx)(v,{books:n,handleShelfUpdate:B})}),Object(p.jsx)(j.a,{path:"/search",element:Object(p.jsx)(m,{books:n,handleShelfUpdate:B,handleQuery:R,query:w,searchBooks:L})})]})})};o.a.render(Object(p.jsx)(s.a.StrictMode,{children:Object(p.jsx)(k,{})}),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.9297755d.chunk.js.map